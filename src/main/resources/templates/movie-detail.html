<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>影视详情</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="likcc-movie-detail">
            <div class="row">
                <div class="col-md-4">
                    <img class="likcc-movie-poster" src="" alt="">
                </div>
                <div class="col-md-8">
                    <h1 class="likcc-movie-title"></h1>
                    <div class="likcc-movie-meta">
                        <p>类型：<span class="likcc-type"></span></p>
                        <p>评分：<span class="likcc-score"></span></p>
                        <p>演员：<span class="likcc-actor"></span></p>
                        <p>年份：<span class="likcc-year"></span></p>
                        <p>语言：<span class="likcc-lang"></span></p>
                        <p>已看：<span class="likcc-seen"></span>集</p>
                        <p>更新周期：<span class="likcc-update-cycle"></span></p>
                        <p>状态：<span class="likcc-status"></span></p>
                    </div>
                    <div class="likcc-movie-content mt-4">
                        <h3>简介</h3>
                        <p class="likcc-content"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            const name = '[[${name}]]';
            loadMovieDetail(name);
        });

        function loadMovieDetail(name) {
            $.get(`/apis/api.bingewatching.lik.cc/v1alpha1/movies/-/${name}`, function(data) {
                const movie = data;
                renderMovieDetail(movie);
            });
        }

        function renderMovieDetail(movie) {
            $('.likcc-movie-poster').attr('src', movie.spec.vod_pic).attr('alt', movie.spec.vod_name);
            $('.likcc-movie-title').text(movie.spec.vod_name);
            $('.likcc-type').text(movie.spec.type_name || '未知');
            $('.likcc-score').text(movie.spec.vod_score || '暂无');
            $('.likcc-actor').text(movie.spec.vod_actor || '未知');
            $('.likcc-year').text(movie.spec.vod_year || '未知');
            $('.likcc-lang').text(movie.spec.vod_lang || '未知');
            $('.likcc-seen').text(movie.spec.seen || '0');
            $('.likcc-update-cycle').text(movie.spec.updateCycle || '未知');
            $('.likcc-status').text(getStatusText(movie.spec.status));
            $('.likcc-content').text(movie.spec.vod_content || '暂无简介');
        }

        function getStatusText(status) {
            switch(status) {
                case '观看中': return '追剧中';
                case '完结': return '已完结';
                case '弃坑': return '已弃坑';
                default: return '未知';
            }
        }
    </script>
</body>
</html> 